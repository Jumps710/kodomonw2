<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éå»ã®æ´»å‹•å ±å‘Š</title>
    <script src="https://static.line-scdn.net/liff/edge/versions/2.20.0/sdk.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>éå»ã®æ´»å‹•å ±å‘Š</h1>
<ul id="historyList">èª­ã¿è¾¼ã¿ä¸­...</ul>

<button onclick="window.location.href='index.html'">æˆ»ã‚‹</button>

<script>
const BACKEND_URL = "https://script.google.com/macros/s/AKfycby3AtgmX1gCDd2KUeYT8TkUBkVKoh_VH0q3oflLp6Bp3tse0SOETZgGV9wgiP8fT4FY/exec";

async function loadHistory() {
    try {
        const response = await fetch(`${BACKEND_URL}?action=report_getHistory`);
        const history = await response.json();
        const historyList = document.getElementById("historyList");
        historyList.innerHTML = "";

        if (history.length === 0) {
            historyList.innerHTML = "<p>å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>";
            return;
        }

        history.forEach(item => {
            const li = document.createElement("li");
            li.innerHTML = `ğŸ“… ${item.date} - ${item.site} / å¤§äºº: ${item.adults}å, å­ã©ã‚‚: ${item.children}å`;
            historyList.appendChild(li);
        });
    } catch (error) {
        document.getElementById("historyList").innerHTML = "<p>å±¥æ­´ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>";
    }
}

document.addEventListener("DOMContentLoaded", loadHistory);
</script>

</body>
</html>
